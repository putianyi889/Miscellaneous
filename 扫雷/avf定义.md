# AVF 文件定义
来源于[avf解析器](https://github.com/Minesweeper-World/minesweeper-rawvf)以及个人的观察，未必准确

- 1字节：大版本号
- 4字节：不知道是干啥的，记为`prefix`
- 1字节：模式。3=初级，4=中级，5=高级，6=自定义。对于自定义，用额外的字节存储参数
  - 1字节：宽w
  - 1字节：高h
  - 2字节：雷数m，大端
- 2m字节：雷的位置。每雷2字节，分别表示行列下标，从1开始
- 一串不知道干什么的乱码，记为`prestamp`
- 由`[]`标志的字符串录像信息，每项之间由`|`隔开
  - [冗余]模式
    - `0`表示初级，`1`表示中级，`2`表示高级，`3`表示自定义
  - [冗余]如果是自定义，加一项形如`WxxHxxMxxx`的自定义参数
  - 起始时间戳
  - 终止时间戳
  - `HS`表示是纪录局。这一项可能没有
  - [冗余]形如`B?T?`，记录3BV和时间（+1s）。时间格式和系统语言相关，某些语言的小数点是逗号
- 一串不知道干什么的乱码，记为`preevent`
- 鼠标事件列，第一个事件的开头是`\0\1`，每个事件占用8字节
  - 第1字节：操作
  - 2字节：横坐标。第2字节高位，第4字节低位
  - 2字节：纵坐标。第6字节高位，第8字节低位
  - 2字节：`时间+1s`的整数部分。第7字节高位，第3字节低位
  - 第5字节：时间的小数部分
- 一串不知道干什么的乱码。开头几个是0，标志鼠标事件的结束，因为不可能`时间+1s=0`
- 以`cs=`开头的20字节乱码，这一部分和上一部分统一记为`presuffix`
- 文件结尾的一串字符串录像信息，每项之间由`\r`隔开
  - [冗余]`RealTime: xxxx`。0.47版本该项不存在
  - `Skin: xxxx`。0.47版本该项不存在
  - 录像标识
  - [冗余]软件信息
    - 0.52.3版本是`Minesweeper Arbiter 0.52.3. Copyright \xa9 2005-2006 Dmitriy I. Sukhomlynov`
    - 0.47版本是`Minesweeper Arbiter 0.47. Copyright \xa9 2005-2006 Dmitriy I. Sukhomlynov`

# AVF 压缩格式 V1.0
- 1字节：压缩算法
- 1字节：大版本号
- 4字节：prefix
- 1字节：参数控制
  - 2位：模式。00表示初级，01表示中级，10表示高级，11表示自定义
  - 1位：是否为纪录
  - 1位：小数点是`.`还是`,`
- 对于0.52.3版本，额外1字节存储皮肤
  - `\1` 代表`3.1`
- 对于自定义，用额外的字节存储参数
  - 1字节：宽w
  - 1字节：高h
- 时间戳
  - 9字节：从2000年1月1日0时整到录像开始的时间，单位0.01s（可以用300年左右）
  - 3字节：录像用时，单位0.01s（可以持续不到两天）
- 标识，以`\r`结尾
- 乱码
  - 2字节：`prestamp`长度
  - `prestamp`
  - 2字节：`preevent`长度
  - `preevent`
  - 2字节：`presuffix`在`cs=`之前的长度
  - `presuffix`
- 雷的排布
  - 01串表示，长度可以通过长宽推出来。通过排布可以推出雷数和3BV。
- 事件列
